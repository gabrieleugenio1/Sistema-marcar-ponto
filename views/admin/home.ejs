<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link rel="stylesheet" href="../css/reset.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
    <link rel="stylesheet" href="../css/home.css"/> 
  </head>
  <body>
    <%- include("../partials/header"); %>
    <main class="main__home">
      <h1 class="h1__funcionario">Funcionários</h1>
      <table class="tabela__funcionario" border="1">
        <thead>
        <tr>
            <th>Matrícula</th>
            <th>Funcionário</th>
            <th>Função</th>
            <th>Setor</th>
            <th>CPF</th>
            <th>Carga Horaria Semanal</th>
            <th>Horas pagas na semana</th>
            <th>Última Entrada</th>
            <th>Última Saída</th>
            <th>Editar</th>
            <th>Ativo</th>
        </tr>
        </thead>
        <tbody>
          <tr>
            <td>000000</td>
            <td>Gabriel</td>
            <td>Programador</td>
            <td>01</td>
            <td>000.000.000-83</td>
            <td>44h</td>
            <td>10h</td>
            <td>14/02/2023 08:00h</td>
            <td>14/02/2023 18:00h</td>
            <td><a href="#">Alterar</a></td>
            <td>Não</td> 
          </tr>
          <% for(funcionario of funcionarios) { %> 
          <tr>           
            <td><%= funcionario.matricula %></td>
            <td><%= funcionario.nome.replace(/(^\w{1})|(\s+\w{1})/g, letter => letter.toUpperCase()) %></td>
            <td><%= funcionario.funcao.replace(/(^\w{1})|(\s+\w{1})/g, letter => letter.toUpperCase()) %></td>
            <td><%= funcionario.setor.replace(/(^\w{1})|(\s+\w{1})/g, letter => letter.toUpperCase()) %></td>
            <td><%= funcionario.cpf %></td>
            <td><%= funcionario.cargahorariasemanal %>h</td>
            <td><%= funcionario.horasPagas ? funcionario.horasPagas + 'h': 'Nenhuma'%></td>
            <td><%= funcionario['pontos.dataEntrada'] ? funcionario['pontos.dataEntrada'] +' - '+funcionario['pontos.horarioEntrada']+'h': "Nenhuma" %></td>
            <td><%= funcionario['pontos.dataSaida'] ? funcionario['pontos.dataSaida'] +' - '+funcionario['pontos.horarioSaida']+'h': "Nenhuma" %></td>
            <td><a href="/admin/alterarfuncionario/<%= funcionario.matricula %>">Alterar</a></td>
            <td><%= funcionario.ativo == 1 ? "Sim" : "Não" %></td>     
        </tr>
        <% } %>  %>
        </tbody>
     </table>
    </main>
  </body>
</html>
